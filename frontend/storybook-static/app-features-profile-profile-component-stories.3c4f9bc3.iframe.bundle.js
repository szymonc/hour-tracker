(self.webpackChunkcircle_hours_web=self.webpackChunkcircle_hours_web||[]).push([[266],{"./src/app/store/auth/auth.actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>AuthActions});var _ngrx_store__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store.mjs");const AuthActions=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.EQ)({source:"Auth",events:{Login:(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Login Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Login Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),Register:(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Register Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Register Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Google Login":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)(),"Google Login Callback":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Google Login Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Google Login Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Refresh Token":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)(),"Refresh Token Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Refresh Token Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)(),"Load Profile":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)(),"Load Profile Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Load Profile Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Update Phone":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Update Phone Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Update Phone Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Restore Session":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)(),"Restore Session Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Restore Session Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)(),Logout:(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)(),"Logout Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)(),"Clear Error":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)()}})},"./src/app/store/auth/auth.selectors.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{nT:()=>selectError,Di:()=>selectIsLoading,mB:()=>selectUser});var ngrx_store=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store.mjs"),auth_actions=__webpack_require__("./src/app/store/auth/auth.actions.ts");const initialState={user:null,accessToken:null,isAuthenticated:!1,isLoading:!1,error:null,requiresPhoneSetup:!1},authFeature=(0,ngrx_store.VG)({name:"auth",reducer:(0,ngrx_store.vy)(initialState,(0,ngrx_store.on)(auth_actions.W.login,auth_actions.W.register,auth_actions.W.googleLogin,state=>({...state,isLoading:!0,error:null})),(0,ngrx_store.on)(auth_actions.W.restoreSession,state=>({...state,isLoading:!0,error:null})),(0,ngrx_store.on)(auth_actions.W.loginSuccess,auth_actions.W.registerSuccess,auth_actions.W.googleLoginSuccess,auth_actions.W.restoreSessionSuccess,(state,{user,accessToken})=>({...state,user,accessToken,isAuthenticated:!0,isLoading:!1,error:null,requiresPhoneSetup:!user.phoneNumber})),(0,ngrx_store.on)(auth_actions.W.loginFailure,auth_actions.W.registerFailure,auth_actions.W.googleLoginFailure,(state,{error})=>({...state,isLoading:!1,error})),(0,ngrx_store.on)(auth_actions.W.refreshTokenSuccess,(state,{accessToken})=>({...state,accessToken})),(0,ngrx_store.on)(auth_actions.W.refreshTokenFailure,auth_actions.W.restoreSessionFailure,()=>initialState),(0,ngrx_store.on)(auth_actions.W.loadProfile,auth_actions.W.updatePhone,state=>({...state,isLoading:!0,error:null})),(0,ngrx_store.on)(auth_actions.W.loadProfileSuccess,auth_actions.W.updatePhoneSuccess,(state,{user})=>({...state,user,isLoading:!1,requiresPhoneSetup:!user.phoneNumber})),(0,ngrx_store.on)(auth_actions.W.loadProfileFailure,auth_actions.W.updatePhoneFailure,(state,{error})=>({...state,isLoading:!1,error})),(0,ngrx_store.on)(auth_actions.W.logoutSuccess,()=>initialState),(0,ngrx_store.on)(auth_actions.W.clearError,state=>({...state,error:null})))}),{selectAuthState,selectUser,selectAccessToken,selectIsAuthenticated,selectIsLoading,selectError,selectRequiresPhoneSetup}=authFeature;(0,ngrx_store.Mz)(selectUser,user=>"admin"===user?.role),(0,ngrx_store.Mz)(selectUser,user=>user?.name??""),(0,ngrx_store.Mz)(selectUser,user=>user?.email??""),(0,ngrx_store.Mz)(selectUser,user=>user?.phoneNumber),(0,ngrx_store.Mz)(selectIsAuthenticated,selectUser,(isAuth,user)=>isAuth&&null!==user?.phoneNumber),(0,ngrx_store.Mz)(selectUser,user=>user?.role??"user")},"./src/app/features/profile/profile.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AdminUser:()=>AdminUser,Default:()=>Default,GoogleUser:()=>GoogleUser,WithoutPhone:()=>WithoutPhone,__namedExportsOrder:()=>__namedExportsOrder,default:()=>profile_component_stories});var dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),ngrx_store_testing=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store-testing.mjs"),animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),profile_component=__webpack_require__("./src/app/features/profile/profile.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAucHJvZmlsZS1jb250YWluZXIgewogICAgICBtYXgtd2lkdGg6IDYwMHB4OwogICAgICBtYXJnaW46IDAgYXV0bzsKICAgIH0KCiAgICAucHJvZmlsZS1pbmZvIHsKICAgICAgbWFyZ2luLWJvdHRvbTogMjRweDsKICAgICAgcGFkZGluZy1ib3R0b206IDI0cHg7CiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTIpOwoKICAgICAgcCB7CiAgICAgICAgbWFyZ2luOiA4cHggMDsKICAgICAgfQogICAgfQoKICAgIGgzIHsKICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDsKICAgIH0KCiAgICAuZm9ybS1maWVsZC1mdWxsIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7CiAgICB9CiAg!./src/app/features/profile/profile.component.ts"),profile_component_default=__webpack_require__.n(profile_component),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),ngrx_store=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store.mjs"),card=__webpack_require__("./node_modules/@angular/material/fesm2022/card.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),progress_spinner=__webpack_require__("./node_modules/@angular/material/fesm2022/progress-spinner.mjs"),auth_actions=__webpack_require__("./src/app/store/auth/auth.actions.ts"),auth_selectors=__webpack_require__("./src/app/store/auth/auth.selectors.ts");let ProfileComponent=class ProfileComponent{fb=(0,core.inject)(fesm2022_forms.ok);store=(0,core.inject)(ngrx_store.il);user$=this.store.select(auth_selectors.mB);isLoading$=this.store.select(auth_selectors.Di);error$=this.store.select(auth_selectors.nT);phoneForm=this.fb.group({phoneNumber:["",[fesm2022_forms.k0.required,fesm2022_forms.k0.pattern(/^\+[1-9]\d{1,14}$/)]]});ngOnInit(){this.user$.subscribe(user=>{user?.phoneNumber&&this.phoneForm.patchValue({phoneNumber:user.phoneNumber})})}onSubmit(){if(this.phoneForm.valid){const{phoneNumber}=this.phoneForm.value;this.store.dispatch(auth_actions.W.updatePhone({phoneNumber}))}}};ProfileComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-profile",standalone:!0,imports:[common.CommonModule,fesm2022_forms.X1,card.Hu,form_field.RG,input.fS,fesm2022_button.Hl,icon.m_,progress_spinner.D6],template:'\n    <div class="profile-container page-container">\n      <h1>Profile Settings</h1>\n\n      <mat-card>\n        <mat-card-content>\n          @if (user$ | async; as user) {\n            <div class="profile-info">\n              <p><strong>Name:</strong> {{ user.name }}</p>\n              <p><strong>Email:</strong> {{ user.email }}</p>\n              <p><strong>Role:</strong> {{ user.role }}</p>\n            </div>\n\n            <h3>Update Phone Number</h3>\n            <form [formGroup]="phoneForm" (ngSubmit)="onSubmit()">\n              <mat-form-field appearance="outline" class="form-field-full">\n                <mat-label>Phone Number</mat-label>\n                <input matInput type="tel" formControlName="phoneNumber" />\n                <mat-hint>E.164 format (e.g., +34612345678)</mat-hint>\n              </mat-form-field>\n\n              <button\n                mat-raised-button\n                color="primary"\n                type="submit"\n                [disabled]="phoneForm.invalid || (isLoading$ | async)"\n              >\n                Update Phone\n              </button>\n            </form>\n          }\n        </mat-card-content>\n      </mat-card>\n    </div>\n  ',styles:[profile_component_default()]})],ProfileComponent);const mockUser={id:"1",email:"john.doe@example.com",name:"John Doe",role:"user",authProvider:"local",phoneNumber:"+34612345678",isActive:!0,createdAt:(new Date).toISOString()},defaultState={auth:{user:mockUser,accessToken:"token",isLoading:!1,error:null}},profile_component_stories={title:"Features/Profile",component:ProfileComponent,tags:["autodocs"],decorators:[(0,dist.applicationConfig)({providers:[(0,animations.provideAnimations)()]}),(0,dist.moduleMetadata)({providers:[(0,ngrx_store_testing.tG)({initialState:defaultState})]})],parameters:{layout:"padded"}},Default={},WithoutPhone={decorators:[(0,dist.moduleMetadata)({providers:[(0,ngrx_store_testing.tG)({initialState:{auth:{user:{...mockUser,phoneNumber:null},accessToken:"token",isLoading:!1,error:null}}})]})]},AdminUser={decorators:[(0,dist.moduleMetadata)({providers:[(0,ngrx_store_testing.tG)({initialState:{auth:{user:{...mockUser,role:"admin"},accessToken:"token",isLoading:!1,error:null}}})]})]},GoogleUser={decorators:[(0,dist.moduleMetadata)({providers:[(0,ngrx_store_testing.tG)({initialState:{auth:{user:{...mockUser,authProvider:"google"},accessToken:"token",isLoading:!1,error:null}}})]})]};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}},WithoutPhone.parameters={...WithoutPhone.parameters,docs:{...WithoutPhone.parameters?.docs,source:{originalSource:"{\n  decorators: [moduleMetadata({\n    providers: [provideMockStore({\n      initialState: {\n        auth: {\n          user: {\n            ...mockUser,\n            phoneNumber: null\n          },\n          accessToken: 'token',\n          isLoading: false,\n          error: null\n        }\n      }\n    })]\n  })]\n}",...WithoutPhone.parameters?.docs?.source}}},AdminUser.parameters={...AdminUser.parameters,docs:{...AdminUser.parameters?.docs,source:{originalSource:"{\n  decorators: [moduleMetadata({\n    providers: [provideMockStore({\n      initialState: {\n        auth: {\n          user: {\n            ...mockUser,\n            role: 'admin'\n          },\n          accessToken: 'token',\n          isLoading: false,\n          error: null\n        }\n      }\n    })]\n  })]\n}",...AdminUser.parameters?.docs?.source}}},GoogleUser.parameters={...GoogleUser.parameters,docs:{...GoogleUser.parameters?.docs,source:{originalSource:"{\n  decorators: [moduleMetadata({\n    providers: [provideMockStore({\n      initialState: {\n        auth: {\n          user: {\n            ...mockUser,\n            authProvider: 'google'\n          },\n          accessToken: 'token',\n          isLoading: false,\n          error: null\n        }\n      }\n    })]\n  })]\n}",...GoogleUser.parameters?.docs?.source}}};const __namedExportsOrder=["Default","WithoutPhone","AdminUser","GoogleUser"]},"./src/app/features/profile/profile.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAucHJvZmlsZS1jb250YWluZXIgewogICAgICBtYXgtd2lkdGg6IDYwMHB4OwogICAgICBtYXJnaW46IDAgYXV0bzsKICAgIH0KCiAgICAucHJvZmlsZS1pbmZvIHsKICAgICAgbWFyZ2luLWJvdHRvbTogMjRweDsKICAgICAgcGFkZGluZy1ib3R0b206IDI0cHg7CiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTIpOwoKICAgICAgcCB7CiAgICAgICAgbWFyZ2luOiA4cHggMDsKICAgICAgfQogICAgfQoKICAgIGgzIHsKICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDsKICAgIH0KCiAgICAuZm9ybS1maWVsZC1mdWxsIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7CiAgICB9CiAg!./src/app/features/profile/profile.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".profile-container {\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.profile-info {\n  margin-bottom: 24px;\n  padding-bottom: 24px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n}\n.profile-info p {\n  margin: 8px 0;\n}\n\nh3 {\n  margin-bottom: 16px;\n}\n\n.form-field-full {\n  width: 100%;\n  margin-bottom: 16px;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);