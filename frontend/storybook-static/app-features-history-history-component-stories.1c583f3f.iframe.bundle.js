(self.webpackChunkcircle_hours_web=self.webpackChunkcircle_hours_web||[]).push([[966],{"./src/app/store/entries/entries.actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>EntriesActions});var _ngrx_store__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store.mjs");const EntriesActions=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.EQ)({source:"Entries",events:{"Load Entries":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Load Entries Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Load Entries Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Create Entry":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Create Entry Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Create Entry Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Set Filters":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Clear Filters":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)(),"Reset Create Status":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)()}})},"./src/app/store/entries/entries.reducer.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D8:()=>entriesFeature,Ix:()=>selectAllEntries});var _ngrx_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store.mjs"),_ngrx_entity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@ngrx/entity/fesm2022/ngrx-entity.mjs"),_entries_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/app/store/entries/entries.actions.ts");const entriesAdapter=(0,_ngrx_entity__WEBPACK_IMPORTED_MODULE_1__.p)({selectId:entry=>entry.id,sortComparer:(a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime()}),initialState=entriesAdapter.getInitialState({filters:{},pagination:{page:1,pageSize:20,totalItems:0,totalPages:0},createStatus:"idle",createError:null,isLoading:!1,error:null}),entriesFeature=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.VG)({name:"entries",reducer:(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.vy)(initialState,(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.loadEntries,state=>({...state,isLoading:!0,error:null})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.loadEntriesSuccess,(state,{entries,pagination})=>entriesAdapter.setAll(entries,{...state,isLoading:!1,pagination})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.loadEntriesFailure,(state,{error})=>({...state,isLoading:!1,error})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.createEntry,state=>({...state,createStatus:"loading",createError:null})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.createEntrySuccess,(state,{entry})=>entriesAdapter.addOne(entry,{...state,createStatus:"success"})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.createEntryFailure,(state,{error})=>({...state,createStatus:"error",createError:error})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.setFilters,(state,{filters})=>({...state,filters})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.clearFilters,state=>({...state,filters:{}})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.resetCreateStatus,state=>({...state,createStatus:"idle",createError:null}))),extraSelectors:({selectEntriesState})=>({...entriesAdapter.getSelectors(selectEntriesState)})}),{selectAll:selectAllEntries,selectEntities:selectEntryEntities,selectIds:selectEntryIds,selectTotal:selectTotalEntries}=entriesFeature},"./src/app/features/history/history.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Empty:()=>Empty,Loading:()=>Loading,ManyEntries:()=>ManyEntries,__namedExportsOrder:()=>__namedExportsOrder,default:()=>history_component_stories});var dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),ngrx_store_testing=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store-testing.mjs"),animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),history_component=__webpack_require__("./src/app/features/history/history.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAuaGlzdG9yeS1jb250YWluZXIgewogICAgICBtYXgtd2lkdGg6IDEwMDBweDsKICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICB9CgogICAgaDEgewogICAgICBtYXJnaW4tYm90dG9tOiAyNHB4OwogICAgfQoKICAgIC5lbnRyaWVzLXRhYmxlIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICB9CgogICAgLmRlc2NyaXB0aW9uLWNlbGwgewogICAgICBtYXgtd2lkdGg6IDMwMHB4OwogICAgfQoKICAgIC5sb2FkaW5nLWNvbnRhaW5lciB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICBwYWRkaW5nOiA0OHB4OwogICAgfQogIA%3D%3D!./src/app/features/history/history.component.ts"),history_component_default=__webpack_require__.n(history_component),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),ngrx_store=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store.mjs"),card=__webpack_require__("./node_modules/@angular/material/fesm2022/card.mjs"),table=__webpack_require__("./node_modules/@angular/material/fesm2022/table.mjs"),paginator=__webpack_require__("./node_modules/@angular/material/fesm2022/paginator.mjs"),progress_spinner=__webpack_require__("./node_modules/@angular/material/fesm2022/progress-spinner.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),entries_actions=__webpack_require__("./src/app/store/entries/entries.actions.ts"),entries_reducer=__webpack_require__("./src/app/store/entries/entries.reducer.ts");let HistoryComponent=class HistoryComponent{store=(0,core.inject)(ngrx_store.il);entries$=this.store.select(entries_reducer.Ix);isLoading$=this.store.select(entries_reducer.D8.selectIsLoading);pagination$=this.store.select(entries_reducer.D8.selectPagination);displayedColumns=["weekStartDate","circleName","hours","description"];ngOnInit(){this.store.dispatch(entries_actions.e.loadEntries({}))}formatDate(dateStr){return new Date(dateStr).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}onPageChange(event){this.store.dispatch(entries_actions.e.loadEntries({page:event.pageIndex+1}))}};HistoryComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-history",standalone:!0,imports:[common.CommonModule,card.Hu,table.tP,paginator.Ou,progress_spinner.D6,icon.m_],template:'\n    <div class="history-container page-container">\n      <h1>Entry History</h1>\n\n      <mat-card>\n        @if (isLoading$ | async) {\n          <div class="loading-container">\n            <mat-spinner></mat-spinner>\n          </div>\n        } @else {\n          <table mat-table [dataSource]="(entries$ | async) ?? []" class="entries-table">\n            <ng-container matColumnDef="weekStartDate">\n              <th mat-header-cell *matHeaderCellDef>Week</th>\n              <td mat-cell *matCellDef="let entry">{{ formatDate(entry.weekStartDate) }}</td>\n            </ng-container>\n\n            <ng-container matColumnDef="circleName">\n              <th mat-header-cell *matHeaderCellDef>Circle</th>\n              <td mat-cell *matCellDef="let entry">{{ entry.circleName }}</td>\n            </ng-container>\n\n            <ng-container matColumnDef="hours">\n              <th mat-header-cell *matHeaderCellDef>Hours</th>\n              <td mat-cell *matCellDef="let entry">{{ entry.hours }}h</td>\n            </ng-container>\n\n            <ng-container matColumnDef="description">\n              <th mat-header-cell *matHeaderCellDef>Description</th>\n              <td mat-cell *matCellDef="let entry" class="description-cell">\n                {{ entry.description | slice:0:50 }}{{ entry.description.length > 50 ? \'...\' : \'\' }}\n              </td>\n            </ng-container>\n\n            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>\n          </table>\n\n          @if ((entries$ | async)?.length === 0) {\n            <div class="empty-state">\n              <mat-icon>history</mat-icon>\n              <h3>No entries yet</h3>\n              <p>Start logging hours to see your history here</p>\n            </div>\n          }\n\n          <mat-paginator\n            [length]="(pagination$ | async)?.totalItems"\n            [pageSize]="(pagination$ | async)?.pageSize"\n            [pageIndex]="(pagination$ | async)?.page! - 1"\n            [pageSizeOptions]="[10, 20, 50]"\n            (page)="onPageChange($event)"\n          ></mat-paginator>\n        }\n      </mat-card>\n    </div>\n  ',styles:[history_component_default()]})],HistoryComponent);const mockEntries=[{id:"1",circleId:"1",circleName:"Engineering",weekStartDate:"2024-01-22",hours:3,description:"Implemented new feature for user authentication",zeroHoursReason:null,createdAt:"2024-01-25T10:00:00Z"},{id:"2",circleId:"2",circleName:"Design",weekStartDate:"2024-01-15",hours:2,description:"Created wireframes for mobile app redesign",zeroHoursReason:null,createdAt:"2024-01-18T14:30:00Z"},{id:"3",circleId:"1",circleName:"Engineering",weekStartDate:"2024-01-08",hours:0,description:"Planned work but had emergency",zeroHoursReason:"Family emergency",createdAt:"2024-01-10T09:00:00Z"}],defaultState={entries:{ids:["1","2","3"],entities:{1:mockEntries[0],2:mockEntries[1],3:mockEntries[2]},filters:{},isLoading:!1,error:null,createStatus:"idle",createError:null,pagination:{page:1,pageSize:10,totalItems:3,totalPages:1}}},history_component_stories={title:"Features/History",component:HistoryComponent,tags:["autodocs"],decorators:[(0,dist.applicationConfig)({providers:[(0,animations.provideAnimations)()]}),(0,dist.moduleMetadata)({providers:[(0,ngrx_store_testing.tG)({initialState:defaultState})]})],parameters:{layout:"padded"}},Default={},Loading={decorators:[(0,dist.moduleMetadata)({providers:[(0,ngrx_store_testing.tG)({initialState:{entries:{...defaultState.entries,ids:[],entities:{},isLoading:!0}}})]})]},Empty={decorators:[(0,dist.moduleMetadata)({providers:[(0,ngrx_store_testing.tG)({initialState:{entries:{...defaultState.entries,ids:[],entities:{},isLoading:!1}}})]})]},ManyEntries={decorators:[(0,dist.moduleMetadata)({providers:[(0,ngrx_store_testing.tG)({initialState:{entries:{...defaultState.entries,pagination:{page:1,pageSize:10,totalItems:50,totalPages:5}}}})]})]};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}},Loading.parameters={...Loading.parameters,docs:{...Loading.parameters?.docs,source:{originalSource:"{\n  decorators: [moduleMetadata({\n    providers: [provideMockStore({\n      initialState: {\n        entries: {\n          ...defaultState.entries,\n          ids: [],\n          entities: {},\n          isLoading: true\n        }\n      }\n    })]\n  })]\n}",...Loading.parameters?.docs?.source}}},Empty.parameters={...Empty.parameters,docs:{...Empty.parameters?.docs,source:{originalSource:"{\n  decorators: [moduleMetadata({\n    providers: [provideMockStore({\n      initialState: {\n        entries: {\n          ...defaultState.entries,\n          ids: [],\n          entities: {},\n          isLoading: false\n        }\n      }\n    })]\n  })]\n}",...Empty.parameters?.docs?.source}}},ManyEntries.parameters={...ManyEntries.parameters,docs:{...ManyEntries.parameters?.docs,source:{originalSource:"{\n  decorators: [moduleMetadata({\n    providers: [provideMockStore({\n      initialState: {\n        entries: {\n          ...defaultState.entries,\n          pagination: {\n            page: 1,\n            pageSize: 10,\n            totalItems: 50,\n            totalPages: 5\n          }\n        }\n      }\n    })]\n  })]\n}",...ManyEntries.parameters?.docs?.source}}};const __namedExportsOrder=["Default","Loading","Empty","ManyEntries"]},"./src/app/features/history/history.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAuaGlzdG9yeS1jb250YWluZXIgewogICAgICBtYXgtd2lkdGg6IDEwMDBweDsKICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICB9CgogICAgaDEgewogICAgICBtYXJnaW4tYm90dG9tOiAyNHB4OwogICAgfQoKICAgIC5lbnRyaWVzLXRhYmxlIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICB9CgogICAgLmRlc2NyaXB0aW9uLWNlbGwgewogICAgICBtYXgtd2lkdGg6IDMwMHB4OwogICAgfQoKICAgIC5sb2FkaW5nLWNvbnRhaW5lciB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICBwYWRkaW5nOiA0OHB4OwogICAgfQogIA%3D%3D!./src/app/features/history/history.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".history-container {\n  max-width: 1000px;\n  margin: 0 auto;\n}\n\nh1 {\n  margin-bottom: 24px;\n}\n\n.entries-table {\n  width: 100%;\n}\n\n.description-cell {\n  max-width: 300px;\n}\n\n.loading-container {\n  display: flex;\n  justify-content: center;\n  padding: 48px;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);