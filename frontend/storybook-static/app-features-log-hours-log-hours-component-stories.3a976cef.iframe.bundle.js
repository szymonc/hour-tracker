(self.webpackChunkcircle_hours_web=self.webpackChunkcircle_hours_web||[]).push([[750],{"./src/app/store/circles/circles.actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>CirclesActions});var _ngrx_store__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store.mjs");const CirclesActions=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.EQ)({source:"Circles",events:{"Load User Circles":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)(),"Load User Circles Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Load User Circles Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)()}})},"./src/app/store/entries/entries.actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>EntriesActions});var _ngrx_store__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store.mjs");const EntriesActions=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.EQ)({source:"Entries",events:{"Load Entries":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Load Entries Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Load Entries Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Create Entry":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Create Entry Success":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Create Entry Failure":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Set Filters":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.xk)(),"Clear Filters":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)(),"Reset Create Status":(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_0__.w5)()}})},"./src/app/store/entries/entries.reducer.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D8:()=>entriesFeature,Ix:()=>selectAllEntries});var _ngrx_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store.mjs"),_ngrx_entity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@ngrx/entity/fesm2022/ngrx-entity.mjs"),_entries_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/app/store/entries/entries.actions.ts");const entriesAdapter=(0,_ngrx_entity__WEBPACK_IMPORTED_MODULE_1__.p)({selectId:entry=>entry.id,sortComparer:(a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime()}),initialState=entriesAdapter.getInitialState({filters:{},pagination:{page:1,pageSize:20,totalItems:0,totalPages:0},createStatus:"idle",createError:null,isLoading:!1,error:null}),entriesFeature=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.VG)({name:"entries",reducer:(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.vy)(initialState,(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.loadEntries,state=>({...state,isLoading:!0,error:null})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.loadEntriesSuccess,(state,{entries,pagination})=>entriesAdapter.setAll(entries,{...state,isLoading:!1,pagination})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.loadEntriesFailure,(state,{error})=>({...state,isLoading:!1,error})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.createEntry,state=>({...state,createStatus:"loading",createError:null})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.createEntrySuccess,(state,{entry})=>entriesAdapter.addOne(entry,{...state,createStatus:"success"})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.createEntryFailure,(state,{error})=>({...state,createStatus:"error",createError:error})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.setFilters,(state,{filters})=>({...state,filters})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.clearFilters,state=>({...state,filters:{}})),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_2__.on)(_entries_actions__WEBPACK_IMPORTED_MODULE_0__.e.resetCreateStatus,state=>({...state,createStatus:"idle",createError:null}))),extraSelectors:({selectEntriesState})=>({...entriesAdapter.getSelectors(selectEntriesState)})}),{selectAll:selectAllEntries,selectEntities:selectEntryEntities,selectIds:selectEntryIds,selectTotal:selectTotalEntries}=entriesFeature},"./src/app/features/log-hours/log-hours.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,NoCircles:()=>NoCircles,Submitting:()=>Submitting,__namedExportsOrder:()=>__namedExportsOrder,default:()=>log_hours_component_stories});var dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),ngrx_store_testing=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store-testing.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),log_hours_component=__webpack_require__("./src/app/features/log-hours/log-hours.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAubG9nLWhvdXJzLWNvbnRhaW5lciB7CiAgICAgIG1heC13aWR0aDogNjAwcHg7CiAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgfQoKICAgIC5sb2ctaG91cnMtY2FyZCB7CiAgICAgIHBhZGRpbmc6IDE2cHg7CiAgICB9CgogICAgbWF0LWNhcmQtdGl0bGUgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBnYXA6IDhweDsKCiAgICAgIG1hdC1pY29uIHsKICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZm9yZXN0KTsKICAgICAgfQogICAgfQoKICAgIC5mb3JtLWZpZWxkLWZ1bGwgewogICAgICB3aWR0aDogMTAwJTsKICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgfQoKICAgIC5yZWFzb24tZmllbGQgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmM2UwOwogICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgIHBhZGRpbmc6IDhweDsKICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDsKICAgIH0KCiAgICAuZm9ybS1hY3Rpb25zIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKICAgICAgZ2FwOiA4cHg7CiAgICAgIG1hcmdpbi10b3A6IDE2cHg7CiAgICB9CiAg!./src/app/features/log-hours/log-hours.component.ts"),log_hours_component_default=__webpack_require__.n(log_hours_component),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),ngrx_store=__webpack_require__("./node_modules/@ngrx/store/fesm2022/ngrx-store.mjs"),card=__webpack_require__("./node_modules/@angular/material/fesm2022/card.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),fesm2022_select=__webpack_require__("./node_modules/@angular/material/fesm2022/select.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),datepicker=__webpack_require__("./node_modules/@angular/material/fesm2022/datepicker.mjs"),fesm2022_core=__webpack_require__("./node_modules/@angular/material/fesm2022/core.mjs"),progress_spinner=__webpack_require__("./node_modules/@angular/material/fesm2022/progress-spinner.mjs"),snack_bar=__webpack_require__("./node_modules/@angular/material/fesm2022/snack-bar.mjs"),take=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/take.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),entries_actions=__webpack_require__("./src/app/store/entries/entries.actions.ts"),circles_actions=__webpack_require__("./src/app/store/circles/circles.actions.ts");function toCircleMembership(item){return{circleId:"circleId"in item?item.circleId:item.id,circleName:"circleName"in item?item.circleName??"":item.name??"",description:item.description,joinedAt:item.joinedAt}}const circlesAdapter=(0,__webpack_require__("./node_modules/@ngrx/entity/fesm2022/ngrx-entity.mjs").p)({selectId:membership=>membership.circleId,sortComparer:(a,b)=>(a.circleName??"").localeCompare(b.circleName??"")}),initialState=circlesAdapter.getInitialState({isLoading:!1,error:null}),circlesFeature=(0,ngrx_store.VG)({name:"circles",reducer:(0,ngrx_store.vy)(initialState,(0,ngrx_store.on)(circles_actions.t.loadUserCircles,state=>({...state,isLoading:!0,error:null})),(0,ngrx_store.on)(circles_actions.t.loadUserCirclesSuccess,(state,{circles})=>circlesAdapter.setAll(circles.map(toCircleMembership),{...state,isLoading:!1})),(0,ngrx_store.on)(circles_actions.t.loadUserCirclesFailure,(state,{error})=>({...state,isLoading:!1,error}))),extraSelectors:({selectCirclesState})=>({...circlesAdapter.getSelectors(selectCirclesState)})}),{selectAll:selectAllCircles,selectEntities:selectCircleEntities,selectIds:selectCircleIds,selectTotal:selectTotalCircles}=circlesFeature;var entries_reducer=__webpack_require__("./src/app/store/entries/entries.reducer.ts");let LogHoursComponent=class LogHoursComponent{fb=(0,core.inject)(fesm2022_forms.ok);store=(0,core.inject)(ngrx_store.il);snackBar=(0,core.inject)(snack_bar.UG);circles$=this.store.select(selectAllCircles);createStatus$=this.store.select(entries_reducer.D8.selectCreateStatus);isLoading$=this.store.select(entries_reducer.D8.selectCreateStatus).pipe((0,take.s)(1));entryForm=this.fb.group({date:[new Date,fesm2022_forms.k0.required],circleId:["",fesm2022_forms.k0.required],hours:[null,[fesm2022_forms.k0.required,fesm2022_forms.k0.min(0)]],description:["",[fesm2022_forms.k0.required,fesm2022_forms.k0.maxLength(2e3)]],zeroHoursReason:[""]});get showReasonField(){return 0===this.entryForm.get("hours")?.value}ngOnInit(){this.store.dispatch(circles_actions.t.loadUserCircles()),this.entryForm.get("hours")?.valueChanges.subscribe(hours=>{const reasonControl=this.entryForm.get("zeroHoursReason");0===hours?reasonControl?.setValidators([fesm2022_forms.k0.required,fesm2022_forms.k0.maxLength(500)]):(reasonControl?.clearValidators(),reasonControl?.setValue("")),reasonControl?.updateValueAndValidity()}),this.createStatus$.pipe((0,filter.p)(status=>"success"===status||"error"===status)).subscribe(status=>{"success"===status&&(this.snackBar.open("Hours logged successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.entryForm.reset({date:new Date}),this.store.dispatch(entries_actions.e.resetCreateStatus()))})}onSubmit(){if(this.entryForm.valid){const{date,circleId,hours,description,zeroHoursReason}=this.entryForm.value;this.store.dispatch(entries_actions.e.createEntry({entry:{date:date.toISOString().split("T")[0],circleId,hours:Number(hours),description,...0===hours&&zeroHoursReason?{zeroHoursReason}:{}}}))}}};LogHoursComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-log-hours",standalone:!0,imports:[common.CommonModule,router.Wk,fesm2022_forms.X1,card.Hu,form_field.RG,input.fS,fesm2022_select.Ve,fesm2022_button.Hl,icon.m_,datepicker.X6,fesm2022_core.WX,progress_spinner.D6,snack_bar._T],template:'\n    <div class="log-hours-container page-container">\n      <mat-card class="log-hours-card">\n        <mat-card-header>\n          <mat-card-title>\n            <mat-icon>add_circle</mat-icon>\n            Log Hours\n          </mat-card-title>\n          <mat-card-subtitle>Record your contribution hours for the week</mat-card-subtitle>\n        </mat-card-header>\n\n        <mat-card-content>\n          <form [formGroup]="entryForm" (ngSubmit)="onSubmit()">\n            <mat-form-field appearance="outline" class="form-field-full">\n              <mat-label>Date</mat-label>\n              <input matInput [matDatepicker]="picker" formControlName="date" />\n              <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>\n              <mat-datepicker #picker></mat-datepicker>\n              <mat-hint>Select any date in the target week</mat-hint>\n              @if (entryForm.get(\'date\')?.hasError(\'required\')) {\n                <mat-error>Date is required</mat-error>\n              }\n            </mat-form-field>\n\n            <mat-form-field appearance="outline" class="form-field-full">\n              <mat-label>Circle</mat-label>\n              <mat-select formControlName="circleId">\n                @for (circle of circles$ | async; track circle.circleId) {\n                  <mat-option [value]="circle.circleId">{{ circle.circleName }}</mat-option>\n                }\n              </mat-select>\n              @if (entryForm.get(\'circleId\')?.hasError(\'required\')) {\n                <mat-error>Circle is required</mat-error>\n              }\n            </mat-form-field>\n\n            <mat-form-field appearance="outline" class="form-field-full">\n              <mat-label>Hours</mat-label>\n              <input\n                matInput\n                type="number"\n                formControlName="hours"\n                min="0"\n                step="0.5"\n              />\n              <mat-hint>Use decimals for partial hours (e.g., 1.5)</mat-hint>\n              @if (entryForm.get(\'hours\')?.hasError(\'required\')) {\n                <mat-error>Hours is required</mat-error>\n              }\n              @if (entryForm.get(\'hours\')?.hasError(\'min\')) {\n                <mat-error>Hours must be 0 or greater</mat-error>\n              }\n            </mat-form-field>\n\n            <mat-form-field appearance="outline" class="form-field-full">\n              <mat-label>Description</mat-label>\n              <textarea\n                matInput\n                formControlName="description"\n                rows="3"\n                placeholder="What did you work on?"\n              ></textarea>\n              @if (entryForm.get(\'description\')?.hasError(\'required\')) {\n                <mat-error>Description is required</mat-error>\n              }\n              @if (entryForm.get(\'description\')?.hasError(\'maxlength\')) {\n                <mat-error>Description must be less than 2000 characters</mat-error>\n              }\n            </mat-form-field>\n\n            @if (showReasonField) {\n              <mat-form-field appearance="outline" class="form-field-full reason-field">\n                <mat-label>Reason for 0 hours</mat-label>\n                <textarea\n                  matInput\n                  formControlName="zeroHoursReason"\n                  rows="2"\n                  placeholder="Why are you logging 0 hours this week?"\n                ></textarea>\n                <mat-hint>Required when logging 0 hours</mat-hint>\n                @if (entryForm.get(\'zeroHoursReason\')?.hasError(\'required\')) {\n                  <mat-error>Reason is required when logging 0 hours</mat-error>\n                }\n              </mat-form-field>\n            }\n\n            <div class="form-actions">\n              <button mat-button type="button" routerLink="/app/dashboard">Cancel</button>\n              <button\n                mat-raised-button\n                color="primary"\n                type="submit"\n                [disabled]="entryForm.invalid || (isLoading$ | async)"\n              >\n                @if (isLoading$ | async) {\n                  <mat-spinner diameter="20"></mat-spinner>\n                } @else {\n                  Log Hours\n                }\n              </button>\n            </div>\n          </form>\n        </mat-card-content>\n      </mat-card>\n    </div>\n  ',styles:[log_hours_component_default()]})],LogHoursComponent);const defaultState={circles:{circles:[{circleId:"1",circleName:"Engineering"},{circleId:"2",circleName:"Design"},{circleId:"3",circleName:"Marketing"}],isLoading:!1,error:null},entries:{ids:[],entities:{},createStatus:"idle",isLoading:!1,error:null}},log_hours_component_stories={title:"Features/LogHours",component:LogHoursComponent,tags:["autodocs"],decorators:[(0,dist.applicationConfig)({providers:[(0,animations.provideAnimations)(),(0,router.lh)([])]}),(0,dist.moduleMetadata)({providers:[(0,ngrx_store_testing.tG)({initialState:defaultState})]})],parameters:{layout:"padded"}},Default={},Submitting={decorators:[(0,dist.moduleMetadata)({providers:[(0,ngrx_store_testing.tG)({initialState:{...defaultState,entries:{ids:[],entities:{},createStatus:"loading",isLoading:!1,error:null}}})]})]},NoCircles={decorators:[(0,dist.moduleMetadata)({providers:[(0,ngrx_store_testing.tG)({initialState:{...defaultState,circles:{circles:[],isLoading:!1,error:null}}})]})]};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}},Submitting.parameters={...Submitting.parameters,docs:{...Submitting.parameters?.docs,source:{originalSource:"{\n  decorators: [moduleMetadata({\n    providers: [provideMockStore({\n      initialState: {\n        ...defaultState,\n        entries: {\n          ids: [],\n          entities: {},\n          createStatus: 'loading',\n          isLoading: false,\n          error: null\n        }\n      }\n    })]\n  })]\n}",...Submitting.parameters?.docs?.source}}},NoCircles.parameters={...NoCircles.parameters,docs:{...NoCircles.parameters?.docs,source:{originalSource:"{\n  decorators: [moduleMetadata({\n    providers: [provideMockStore({\n      initialState: {\n        ...defaultState,\n        circles: {\n          circles: [],\n          isLoading: false,\n          error: null\n        }\n      }\n    })]\n  })]\n}",...NoCircles.parameters?.docs?.source}}};const __namedExportsOrder=["Default","Submitting","NoCircles"]},"./src/app/features/log-hours/log-hours.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAubG9nLWhvdXJzLWNvbnRhaW5lciB7CiAgICAgIG1heC13aWR0aDogNjAwcHg7CiAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgfQoKICAgIC5sb2ctaG91cnMtY2FyZCB7CiAgICAgIHBhZGRpbmc6IDE2cHg7CiAgICB9CgogICAgbWF0LWNhcmQtdGl0bGUgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBnYXA6IDhweDsKCiAgICAgIG1hdC1pY29uIHsKICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZm9yZXN0KTsKICAgICAgfQogICAgfQoKICAgIC5mb3JtLWZpZWxkLWZ1bGwgewogICAgICB3aWR0aDogMTAwJTsKICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgfQoKICAgIC5yZWFzb24tZmllbGQgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmM2UwOwogICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgIHBhZGRpbmc6IDhweDsKICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDsKICAgIH0KCiAgICAuZm9ybS1hY3Rpb25zIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKICAgICAgZ2FwOiA4cHg7CiAgICAgIG1hcmdpbi10b3A6IDE2cHg7CiAgICB9CiAg!./src/app/features/log-hours/log-hours.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".log-hours-container {\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.log-hours-card {\n  padding: 16px;\n}\n\nmat-card-title {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\nmat-card-title mat-icon {\n  color: var(--color-forest);\n}\n\n.form-field-full {\n  width: 100%;\n  margin-bottom: 8px;\n}\n\n.reason-field {\n  background-color: #fff3e0;\n  border-radius: 4px;\n  padding: 8px;\n  margin-bottom: 16px;\n}\n\n.form-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-top: 16px;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);